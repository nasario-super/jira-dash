import{o as S,_ as L,j as e,C as w,a as b,b as I,p as o,c as k,R as C,B as m,l as g,F as O,P as R,h as $,i as A,L as z,d as F,T as V}from"./index-55f72780.js";import{r as i}from"./vendor-863865b6.js";import{E as W}from"./external-link-63488bbc.js";import"./utils-f0959f0c.js";import"./charts-aa2a58ae.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=S("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=S("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),Y=({issues:n,sprints:d,timeRange:x})=>{const[c,T]=i.useState([]),[h,u]=i.useState(!1),[p,M]=i.useState("all"),[f,P]=i.useState("priority"),[j,D]=i.useState("desc");i.useEffect(()=>{y()},[n,d,x]);const y=async()=>{u(!0);try{console.log("🔍 AIInsightsPanel - loadInsights Debug:",{issuesCount:n.length,sprintsCount:d.length,timeRange:x,issuesSample:n.slice(0,3).map(t=>({key:t.key,status:t.fields.status.name,type:t.fields.issuetype.name})),sprintsSample:d.slice(0,3).map(t=>({id:t.id,name:t.name,state:t.state}))});const{default:s}=await L(()=>import("./aiInsightsService-c5fbee27.js"),[]),a=await s.getInstance().generateInsights(n,d,x);console.log("🔍 AIInsightsPanel - generatedInsights:",{insightsCount:a.length,insightsSample:a.slice(0,3).map(t=>({id:t.id,type:t.type,title:t.title,confidence:t.confidence}))}),T(a)}catch(s){console.error("Error loading AI insights:",s)}finally{u(!1)}},B=s=>{switch(s){case"performance":return e.jsx(V,{className:"w-5 h-5"});case"trend":return e.jsx(F,{className:"w-5 h-5"});case"anomaly":return e.jsx(A,{className:"w-5 h-5"});case"recommendation":return e.jsx(z,{className:"w-5 h-5"});case"risk":return e.jsx(A,{className:"w-5 h-5"});default:return e.jsx(o,{className:"w-5 h-5"})}},E=s=>{switch(s){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_=s=>{switch(s){case"performance":return"text-blue-600";case"trend":return"text-purple-600";case"anomaly":return"text-red-600";case"recommendation":return"text-green-600";case"risk":return"text-orange-600";default:return"text-gray-600"}},N=[...c.filter(s=>p==="all"?!0:s.type===p)].sort((s,r)=>{let a,t;switch(f){case"priority":a=s.priority,t=r.priority;break;case"confidence":a=s.confidence,t=r.confidence;break;case"impact":const v={critical:4,high:3,medium:2,low:1};a=v[s.impact]||0,t=v[r.impact]||0;break;default:a=s.priority,t=r.priority}return j==="desc"?t-a:a-t}),l={total:c.length,critical:c.filter(s=>s.impact==="critical").length,high:c.filter(s=>s.impact==="high").length,medium:c.filter(s=>s.impact==="medium").length,low:c.filter(s=>s.impact==="low").length};return h?e.jsxs(w,{children:[e.jsx(b,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5"}),"AI Insights"]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(C,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:"Analisando dados com IA..."})]})})]}):e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5"}),"AI Insights",e.jsx(m,{variant:"secondary",className:"ml-2",children:l.total})]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:y,disabled:h,children:[e.jsx(C,{className:`w-4 h-4 mr-2 ${h?"animate-spin":""}`}),"Atualizar"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-2 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.critical}),e.jsx("div",{className:"text-xs text-gray-500",children:"Crítico"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.high}),e.jsx("div",{className:"text-xs text-gray-500",children:"Alto"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.medium}),e.jsx("div",{className:"text-xs text-gray-500",children:"Médio"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.low}),e.jsx("div",{className:"text-xs text-gray-500",children:"Baixo"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:l.total}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]})]})]}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsxs("select",{value:p,onChange:s=>M(s.target.value),className:"px-3 py-1 border rounded-md text-sm",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"performance",children:"Performance"}),e.jsx("option",{value:"trend",children:"Tendências"}),e.jsx("option",{value:"anomaly",children:"Anomalias"}),e.jsx("option",{value:"recommendation",children:"Recomendações"}),e.jsx("option",{value:"risk",children:"Riscos"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:f,onChange:s=>P(s.target.value),className:"px-3 py-1 border rounded-md text-sm",children:[e.jsx("option",{value:"priority",children:"Prioridade"}),e.jsx("option",{value:"confidence",children:"Confiança"}),e.jsx("option",{value:"impact",children:"Impacto"})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>D(j==="desc"?"asc":"desc"),children:j==="desc"?e.jsx(U,{className:"w-4 h-4"}):e.jsx(q,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"space-y-4",children:N.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(o,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhum insight encontrado para os dados atuais."}),e.jsx("p",{className:"text-sm",children:"Tente ajustar os filtros ou aguarde mais dados."})]}):N.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${_(s.type)} bg-opacity-10`,children:B(s.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(m,{className:E(s.impact),children:s.impact}),e.jsx(m,{variant:"outline",children:s.category}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Prioridade: ",s.priority,"/10"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Confiança"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{value:s.confidence,className:"w-20 h-2"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.confidence,"%"]})]})]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),Object.keys(s.metrics).length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Métricas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(s.metrics).map(([r,a])=>e.jsxs(m,{variant:"outline",className:"text-xs",children:[r,":"," ",typeof a=="number"?a.toFixed(2):a]},r))})]}),s.recommendations.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Recomendações:"}),e.jsx("ul",{className:"space-y-1",children:s.recommendations.map((r,a)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx($,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:r})]},a))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleString("pt-BR")}),e.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>{console.log("📊 Detalhes do insight:",s),alert(`Insight: ${s.title}

Descrição: ${s.description}

Confiança: ${s.confidence}%

Impacto: ${s.impact}`)},children:[e.jsx(W,{className:"w-4 h-4 mr-1"}),"Detalhes"]})]})]},s.id))})]})]})};export{Y as default};
//# sourceMappingURL=AIInsightsPanel-0e9e6c97.js.map
